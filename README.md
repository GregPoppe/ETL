# ETL

Extract: Using iExtrading api we were able to gather the stock data for average price for every minute that the stock market is open in a given day. We were able to extract a lot of data for each stock on each minute. Running a loop to gather information on 5 Different stock types (EBAY, AAPL, AMZN, CSCO, MSFT). Once this information was gather we were able to put the json data into a data frame to work with. Used the OANDA API to pull exchange rates for the Euro to dollar in 5 minute intervals.
Transform: Once the stock information was in a data frame it had columns that we were not using for the sake of our project. We created another data frame that only included the information that was needed for the ETL. From here we had to put the date and time data into one object and move that to an aware date time object in order to then transform it into UTC time zone and Unix time. Again we created another data frame from that with the stock symbol, Unix, and average price in that minute. With the OANDA data we added some date and time columns, made a check for missing data by calculating the difference in seconds between two sequential rows. We then made calculations on the raw data to look for indicators (in the indicators db).
Load: In order to load the information into different tables we split the above Data Frame into a data frame for each stock and then loaded that into the database. This created one table per stock. We use the information from the OANDA API to update the daily in a daily table. The daily table appends to the source table when updated and removes duplicates. We had he two tables as stock data and exchange rate data. The two tables were joined using inner join to filter out nulls. There was no foreign key connecting the two databases since they were derived from completely different sources. The way to view them directly is using the join command and seeing the end result table.
